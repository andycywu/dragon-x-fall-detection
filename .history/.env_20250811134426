(.venv_mediapipe) (base) andycyw@AndyCyWudeMacBook-Pro mvp_fall_detection_starter % # 設置QAI Hub (如果有API Token)
export QAI_HUB_API_TOKEN='h0eubh7un3kk64u6oxisg9rbt8bbgubs913bzls2'

# 運行各種測試
python unified_ai_detector.py
python cross_platform_ai_detector.py
zsh: unknown file attribute: ^%
zsh: command not found: #
🧠 統一AI檢測器測試
==================================================
INFO:__main__:🚀 初始化統一AI檢測系統...
INFO:__main__:🖥️ 檢測平台: mac_apple_silicon
INFO:__main__:🧠 AI加速器: apple_neural_engine
INFO:__main__:✅ ONNX Runtime可用
INFO:__main__:✅ QAI Hub可用
INFO:__main__:✅ MediaPipe可用
INFO:__main__:📋 ONNX提供商: ['CoreMLExecutionProvider', 'CPUExecutionProvider']
INFO:__main__:✅ ONNX Runtime初始化完成
INFO:__main__:☁️ QAI Hub設備數量: 82
INFO:__main__:🎯 選擇設備: Snapdragon X Elite CRD
INFO:__main__:✅ QAI Hub初始化完成
WARNING: All log messages before absl::InitializeLog() is called are written to STDERR
I0000 00:00:1754891020.022385  988361 gl_context.cc:369] GL version: 2.1 (2.1 Metal - 89.4), renderer: Apple M3
ERROR:__main__:❌ MediaPipe初始化失敗: ValidatedGraphConfig Initialization failed.
ImageToTensorCalculator: ; RET_CHECK failure (mediapipe/calculators/tensor/image_to_tensor_calculator.cc:155) ValidateOptionOutputDims(options) returned INTERNAL: ; RET_CHECK failure (./mediapipe/calculators/tensor/image_to_tensor_utils.h:136) options.has_output_tensor_float_range() || options.has_output_tensor_int_range() || options.has_output_tensor_uint_range()Output tensor range is required. 
InferenceCalculatorCpu: ; RET_CHECK failure (mediapipe/calculators/tensor/inference_calculator_cpu.cc:62) !options.model_path().empty() ^ kSideInModel(cc).IsConnected()Either model as side packet or model path in options is required.
SplitDetectionVectorCalculator: The number of output streams should match the number of ranges specified in the CalculatorOptions.
ImageToTensorCalculator: ; RET_CHECK failure (mediapipe/calculators/tensor/image_to_tensor_calculator.cc:155) ValidateOptionOutputDims(options) returned INTERNAL: ; RET_CHECK failure (./mediapipe/calculators/tensor/image_to_tensor_utils.h:136) options.has_output_tensor_float_range() || options.has_output_tensor_int_range() || options.has_output_tensor_uint_range()Output tensor range is required. 
ConstantSidePacketCalculator: ; RET_CHECK failure (mediapipe/calculators/core/constant_side_packet_calculator.cc:66) (cc->OutputSidePackets().NumEntries(kPacketTag))==(options.packet_size())Number of output side packets has to be same as number of packets configured in options.
ConstantSidePacketCalculator: ; RET_CHECK failure (mediapipe/calculators/core/constant_side_packet_calculator.cc:66) (cc->OutputSidePackets().NumEntries(kPacketTag))==(options.packet_size())Number of output side packets has to be same as number of packets configured in options.
ConstantSidePacketCalculator: ; RET_CHECK failure (mediapipe/calculators/core/constant_side_packet_calculator.cc:66) (cc->OutputSidePackets().NumEntries(kPacketTag))==(options.packet_size())Number of output side packets has to be same as number of packets configured in options.
SplitTensorVectorCalculator: The number of output streams should match the number of ranges specified in the CalculatorOptions.
SplitNormalizedLandmarkListCalculator: The number of output streams should match the number of ranges specified in the CalculatorOptions.
SplitLandmarkListCalculator: The number of output streams should match the number of ranges specified in the CalculatorOptions.

📊 系統狀態:
   平台: mac_apple_silicon
   AI加速器: apple_neural_engine
   ONNX Runtime: ✅
   QAI Hub: ✅
   MediaPipe: ❌
   執行提供商: CoreMLExecutionProvider, CPUExecutionProvider
   目標設備: Snapdragon X Elite CRD

🖼️ 測試圖像: andy.jpg
INFO: Created TensorFlow Lite XNNPACK delegate for CPU.
W0000 00:00:1754891020.034632  988681 inference_feedback_manager.cc:114] Feedback manager requires a model with a single signature inference. Disabling support for feedback tensors.
   風險分數: 0.60
   警報: 無
   檢測結果: 3 項

✅ 統一檢測器測試完成！
🌐 跨平台AI檢測系統分析
==================================================
INFO:__main__:🌐 初始化跨平台AI檢測系統...
INFO:__main__:🖥️ 檢測到平台: mac_apple_silicon
INFO:__main__:💻 系統: darwin
INFO:__main__:🔧 架構: arm64
INFO:__main__:🧠 AI加速器: apple_neural_engine
INFO:__main__:⚡ 主要提供商: CoreMLExecutionProvider
INFO:__main__:☁️ QAI Hub: ✅ 可用
INFO:__main__:✅ 啟用Apple Neural Engine加速
INFO:__main__:✅ 添加CPU後備支援
INFO:__main__:📋 可用提供商: ['CoreMLExecutionProvider', 'CPUExecutionProvider']
INFO:__main__:☁️ QAI Hub連接成功，可用設備: 82
INFO:__main__:🎯 選擇目標設備: Snapdragon 8cx Gen 3 CRD
INFO:__main__:✅ 啟用Apple Neural Engine加速
INFO:__main__:✅ 添加CPU後備支援

📊 平台分析結果:
   平台類型: mac_apple_silicon
   AI加速器: apple_neural_engine
   ONNX Runtime: ✅ 成功
   QAI Hub: ✅ 成功

🚀 部署策略:
   執行模式: local_coreml
   優化目標: development_speed

💡 建議:
   🍎 在Mac上進行核心功能開發和測試
   ☁️ 使用QAI Hub進行Snapdragon設備雲端驗證
   🔧 實現硬件抽象層以支持未來移植
   📊 建立性能基準以對比不同平台

📝 詳細報告已保存: cross_platform_analysis.json
✅ 跨平台分析完成！
(.venv_mediapipe) (base) andycyw@AndyCyWudeMacBook-Pro mvp_fall_detection_starter % # Qualcomm AI Hub API Configuration
# 獲取API Token: https://aihub.qualcomm.com/
# 文檔: https://app.aihub.qualcomm.com/docs

# QAI Hub API Token (必填)
QAI_HUB_API_TOKEN=h0eubh7un3kk64u6oxisg9rbt8bbgubs913bzls2

# QAI Hub 配置
QAI_HUB_BASE_URL=https://app.aihub.qualcomm.com
QAI_HUB_DEVICE_GROUP=default

# 項目配置
PROJECT_NAME=hackathon_fall_detection
DEBUG_MODE=true

# 性能設置
ENABLE_QAI_ACCELERATION=true
MODEL_OPTIMIZATION_LEVEL=balanced  # options: speed, balanced, accuracy
INFERENCE_DEVICE_TYPE=auto  # options: auto, cpu, gpu, npu

# 檢測參數
FALL_DETECTION_THRESHOLD=0.7
BODY_ANGLE_THRESHOLD=30
POSITION_CHANGE_THRESHOLD=0.3

# 音頻設置
ENABLE_AUDIO_DETECTION=true
WHISPER_MODEL_SIZE=tiny  # options: tiny, base, small, medium, large
AUDIO_SAMPLE_RATE=16000

# Web界面設置
STREAMLIT_PORT=8502
STREAMLIT_HOST=0.0.0.0
WEB_TITLE=黑客松跌倒檢測系統

# 日誌設置
LOG_LEVEL=INFO
LOG_FILE=logs/detection.log
ENABLE_PERFORMANCE_LOGGING=true
